import java.sql.*;

public class Main {
	public static void main(String[] args) throws ClassNotFoundException, SQLException {
		
		/*
		 * Hello fellers, before you begin the journey of database connection, you need to make sure you have the proper
		 * driver for JDBC installed first
		 * 
		 * In my case I am running on JAVA version 21, to check this:
		 * open cmd
		 * type "java -version"
		 * 
		 * Grab the appropriate version from here:
		 * https://learn.microsoft.com/en-us/sql/connect/jdbc/release-notes-for-the-jdbc-driver?view=sql-server-ver16#126
		 * Extract the file and locate the jar
		 * sqljdbc_12.6 > enu > jars > mssql-jdbc-12.6.1.jre11.jar
		 * 
		 * This jar file needs to be put in the build path of the java project like so:
		 * Right-Click "javaProjectName" > Build Path > Add External Archives > Select "mssql-jdbc-12.6.1.jre11.jar"
		 * 
		 * Reload and pray. Good luck!
		 */
	    Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
	    
	    //Declare name and password variables
	    String hostName = "group5chowdhury";
	    String dbName = "ChowdhuryFanClub";
	    String user = "Groupmates";
	    String password = "Group5best";
	    
	    //Concat database connection string
	    String url = String.format("jdbc:sqlserver://%s.database.windows.net:1433;database=%s;user=%s;password=%s;encrypt=true;hostNameInCertificate=*.database.windows.net;loginTimeout=30;", hostName, dbName, user, password);
	    Connection conn = DriverManager.getConnection(url, user, password);
	    Statement stat = conn.createStatement();
	    
	    /*
	     * Result set is the return from the query, this can be accessed via
	     * rs.getString(2) to return a string from the second column of the result set
	     * For example, we do the following
	     * Result rs = stat.executeQuery("SELECT * FROM dbo.Patient");
	     * this will return the entire returned set of the query
	     * to iterate
	     * while(rs.next()) {
	     * 		System.out.println(rs.getString(2));
	     * }
	     */
	    
	    ResultSet rs = stat.executeQuery("SELECT * FROM dbo.Patient");
	    while(rs.next()) {
	        System.out.println(rs.getString(2));
	    }
	    
	    //closing the connection after execution
	    rs.close();
	    stat.close();
	    conn.close();
	}

}